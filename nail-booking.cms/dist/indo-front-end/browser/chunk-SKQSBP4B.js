import{G as S,I as y,Ma as L,O as I,P as f,Q as N,R as C,Ra as j,Sa as B,T as x,V as E,W as T,X as k,_ as M,ba as q,k as F,pa as D}from"./chunk-XOH4KKXI.js";import{p as _}from"./chunk-5Y42TQ57.js";import{Eb as u,Ib as s,Nb as c,Tb as n,Ub as i,Vb as a,dc as w,ec as g,mb as r,nb as m,nc as d,ua as v,vc as b}from"./chunk-2BJ5WP7N.js";function P(t,p){t&1&&(n(0,"li"),d(1," Username is required "),i())}function G(t,p){if(t&1&&(n(0,"ul",16),u(1,P,2,0,"li",17),i()),t&2){let o=g();r(),s("ngIf",o.loginForm.controls.userName==null||o.loginForm.controls.userName.errors==null?null:o.loginForm.controls.userName.errors.required)}}function O(t,p){t&1&&(n(0,"li"),d(1," Password is required "),i())}function A(t,p){if(t&1&&(n(0,"ul",16),u(1,O,2,0,"li",17),i()),t&2){let o=g();r(),s("ngIf",o.loginForm.controls.password==null||o.loginForm.controls.password.errors==null?null:o.loginForm.controls.password.errors.required)}}var ee=(()=>{class t{constructor(o,l,e,h){this.formBuilder=o,this.authService=l,this.router=e,this.toastService=h,this.message={login_success:"\u0110\u0103ng nh\u1EADp th\xE0nh c\xF4ng",login_fail:"M\u1EADt kh\u1EA9u kh\xF4ng \u0111\xFAng",login_notfound:"Kh\xF4ng t\xECm th\u1EA5y ng\u01B0\u1EDDi d\xF9ng"}}ngOnInit(){this.loginForm=this.formBuilder.group({userName:["",[f.required]],password:["",[f.required]]}),this.authService.IsLoggedIn()&&this.router.navigate(["/dashboard"])}login(){this.authService.login(this.loginForm.value).subscribe({next:o=>{if(o.isSuccess)localStorage.setItem("user",JSON.stringify(o.data.user)),localStorage.setItem("token",o.data.token),this.router.navigate(["/dashboard"]),this.toastService.showToast({message:this.message.login_success,type:"success",icon:"pi pi-check",delay:4e3});else switch(o.errorCode){case 1:this.toastService.showToast({message:this.message.login_notfound,type:"warn",icon:"pi pi-exclamation-triangle",delay:4e3});break;default:this.toastService.showToast({message:this.message.login_fail,type:"error",icon:"pi pi-ban",delay:4e3})}}})}static{this.\u0275fac=function(l){return new(l||t)(m(k),m(j),m(F),m(B))}}static{this.\u0275cmp=v({type:t,selectors:[["app-login"]],standalone:!0,features:[b],decls:21,vars:9,consts:[[1,"flex","h-screen","surface-ground"],[1,"surface-card","m-auto","shadow-3","border-round-xl","w-full","lg:w-8","flex","overflow-hidden"],[1,"md:col-8","col-0","py-0","pl-0","align-items-center","login-background",2,"padding","0 !important"],["src","../../../../../assets/images/login-banner.jpg","width","100%","height","100%","alt","",1,"login-banner"],[1,"col-12","md:col-4"],[1,"text-center","mt-5"],["src","../../../../../assets/images/logo.png","alt","Image","height","50",1,"mb-3"],[1,"px-2","py-4"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","email",1,"block","text-900","font-medium","mb-3"],["id","email","formControlName","userName","type","text","placeholder","Enter your username","pInputText",""],["class","p-button-success text-red-400 p-button-text pl-4 y-1 w-full",4,"ngIf"],["for","password",1,"block","text-900","font-medium","mb-3"],["id","password","formControlName","password","type","password","placeholder","Enter your password","pInputText",""],["type","submit","pButton","","pRipple","","label","\u0110\u0103ng nh\u1EADp","icon","pi pi-user",1,"w-full","text-white"],[1,"p-button-success","text-red-400","p-button-text","pl-4","y-1","w-full"],[4,"ngIf"]],template:function(l,e){l&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),a(3,"img",3),i(),n(4,"div",4)(5,"div",5),a(6,"img",6)(7,"p-divider"),i(),n(8,"div",7)(9,"form",8),w("ngSubmit",function(){return e.login()}),n(10,"div",9)(11,"label",10),d(12,"Username"),i(),a(13,"input",11),u(14,G,2,1,"ul",12),i(),n(15,"div",9)(16,"label",13),d(17,"Password"),i(),a(18,"input",14),u(19,A,2,1,"ul",12),i(),a(20,"button",15),i()()()()()),l&2&&(r(9),s("formGroup",e.loginForm),r(4),c("w-full ",e.loginForm.errors==null?null:e.loginForm.errors.required,""),r(),s("ngIf",(e.loginForm.controls.userName==null?null:e.loginForm.controls.userName.invalid)&&((e.loginForm.controls.userName==null?null:e.loginForm.controls.userName.dirty)||(e.loginForm.controls.userName==null?null:e.loginForm.controls.userName.touched))),r(4),c("w-full ",e.loginForm.errors==null?null:e.loginForm.errors.required,""),r(),s("ngIf",(e.loginForm.controls.password==null?null:e.loginForm.controls.password.invalid)&&((e.loginForm.controls.password==null?null:e.loginForm.controls.password.dirty)||(e.loginForm.controls.password==null?null:e.loginForm.controls.password.touched))))},dependencies:[D,y,M,S,q,x,I,N,C,L,_,E,T],styles:[".login-banner[_ngcontent-%COMP%]{animation:upDown 6s infinite alternate}.login-background[_ngcontent-%COMP%]{background:#a4d1ff;background:radial-gradient(circle,#a4d1ff 11%,#aee0ff 49%,#6fbaff)}"]})}}return t})();export{ee as LoginComponent};
